#!/usr/bin/env php
<?php

if ($vendorAutoLoadFile = $GLOBALS['_composer_autoload_path'] ?? null) {
    $classLoader = require $vendorAutoLoadFile;
} elseif (file_exists($vendorAutoLoadFile = dirname(__DIR__) . '/.build/vendor/autoload.php')) {
    // companienv is root package, thus vendor folder is .build/vendor
    $classLoader = require $vendorAutoLoadFile;
} elseif (file_exists($vendorAutoLoadFile = dirname(__DIR__, 4) . '/vendor/autoload.php')) {
    // companienv is a dependency, thus located in vendor/sroze/companienv/bin
    $classLoader = require $vendorAutoLoadFile;
} else {
    echo 'Could not find autoload.php file. companienv needs to be installed with composer' . PHP_EOL;
    exit(1);
}

//if (is_file($autoload = getcwd() . '/vendor/autoload.php')) {
//    require $autoload;
//}
//
//if (!class_exists('Companienv\\Application', true)) {
//    if (is_file($autoload = __DIR__ . '/../vendor/autoload.php')) {
//        require($autoload);
//    } elseif (is_file($autoload = __DIR__ . '/../../../autoload.php')) {
//        require($autoload);
//    } else {
//        fwrite(STDERR,
//            'You must set up the project dependencies, run the following commands:'.PHP_EOL.
//            'curl -s http://getcomposer.org/installer | php'.PHP_EOL.
//            'php composer.phar install'.PHP_EOL
//        );
//        exit(1);
//    }
//}

$rootFolder = getcwd();

$application = new \Companienv\Application($rootFolder);
$application->run();
